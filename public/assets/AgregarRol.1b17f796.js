import{Q as be,a as ye,u as ke,b as J,c as ge}from"./use-quasar.bc44577f.js";import{Q as me}from"./Api.dfad945c.js";import{G as te,j as xe,A as f,T as _e,r as F,s as Se,n as q,h as H,l as Te,v as qe,E as Ce,C as Ke,Q as X,t as Z,W as we,aA as Ee,q as ee,_ as Ae,d as $e,o as Qe,a2 as Fe,f as z,e as $,a as Q,a6 as Ne}from"./index.ba1a224f.js";import{u as Re,a as Ue}from"./use-dark.efe23668.js";import"./index.2cf0d985.js";var Be=te({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(l,{slots:h,emit:k}){let g=!1,m,_,b,T,v,C;function K(){m&&m(),m=null,g=!1,clearTimeout(b),clearTimeout(T),_!==void 0&&_.removeEventListener("transitionend",v),v=null}function N(d,S,s){d.style.overflowY="hidden",S!==void 0&&(d.style.height=`${S}px`),d.style.transition=`height ${l.duration}ms cubic-bezier(.25, .8, .50, 1)`,g=!0,m=s}function R(d,S){d.style.overflowY=null,d.style.height=null,d.style.transition=null,K(),S!==C&&k(S)}function U(d,S){let s=0;_=d,g===!0?(K(),s=d.offsetHeight===d.scrollHeight?0:void 0):C="hide",N(d,s,S),b=setTimeout(()=>{d.style.height=`${d.scrollHeight}px`,v=x=>{(Object(x)!==x||x.target===d)&&R(d,"show")},d.addEventListener("transitionend",v),T=setTimeout(v,l.duration*1.1)},100)}function w(d,S){let s;_=d,g===!0?K():(C="show",s=d.scrollHeight),N(d,s,S),b=setTimeout(()=>{d.style.height=0,v=x=>{(Object(x)!==x||x.target===d)&&R(d,"hide")},d.addEventListener("transitionend",v),T=setTimeout(v,l.duration*1.1)},100)}return xe(()=>{g===!0&&K()}),()=>f(_e,{css:!1,appear:l.appear,onEnter:U,onLeave:w},h.default)}});const Le=["none","strict","leaf","leaf-filtered"];var ze=te({name:"QTree",props:{...Re,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:l=>Le.includes(l)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(l,{slots:h,emit:k}){const{proxy:g}=Te(),{$q:m}=g,_=Ue(l,m),b=F({}),T=F(l.ticked||[]),v=F(l.expanded||[]);let C={};Se(()=>{C={}});const K=q(()=>`q-tree q-tree--${l.dense===!0?"dense":"standard"}`+(l.noConnectors===!0?" q-tree--no-connectors":"")+(_.value===!0?" q-tree--dark":"")+(l.color!==void 0?` text-${l.color}`:"")),N=q(()=>l.selected!==void 0),R=q(()=>l.icon||m.iconSet.tree.icon),U=q(()=>l.controlColor||l.color),w=q(()=>l.textColor!==void 0?` text-${l.textColor}`:""),d=q(()=>{const t=l.selectedColor||l.color;return t?` text-${t}`:""}),S=q(()=>l.filterMethod!==void 0?l.filterMethod:(t,i)=>{const e=i.toLowerCase();return t[l.labelKey]&&t[l.labelKey].toLowerCase().indexOf(e)>-1}),s=q(()=>{const t={},i=(e,a)=>{const n=e.tickStrategy||(a?a.tickStrategy:l.tickStrategy),o=e[l.nodeKey],c=e[l.childrenKey]&&e[l.childrenKey].length>0,E=e.disabled!==!0&&N.value===!0&&e.selectable!==!1,y=e.disabled!==!0&&e.expandable!==!1,he=n!=="none",L=n==="strict",p=n==="leaf-filtered",V=n==="leaf"||n==="leaf-filtered";let O=e.disabled!==!0&&e.tickable!==!1;V===!0&&O===!0&&a&&a.tickable!==!0&&(O=!1);let A=e.lazy;A===!0&&b.value[o]!==void 0&&Array.isArray(e[l.childrenKey])===!0&&(A=b.value[o]);const r={key:o,parent:a,isParent:c,lazy:A,disabled:e.disabled,link:e.disabled!==!0&&(E===!0||y===!0&&(c===!0||A===!0)),children:[],matchesFilter:l.filter?S.value(e,l.filter):!0,selected:o===l.selected&&E===!0,selectable:E,expanded:c===!0?v.value.includes(o):!1,expandable:y,noTick:e.noTick===!0||L!==!0&&A&&A!=="loaded",tickable:O,tickStrategy:n,hasTicking:he,strictTicking:L,leafFilteredTicking:p,leafTicking:V,ticked:L===!0?T.value.includes(o):c===!0?!1:T.value.includes(o)};if(t[o]=r,c===!0&&(r.children=e[l.childrenKey].map(u=>i(u,r)),l.filter&&(r.matchesFilter!==!0?r.matchesFilter=r.children.some(u=>u.matchesFilter):r.noTick!==!0&&r.disabled!==!0&&r.tickable===!0&&p===!0&&r.children.every(u=>u.matchesFilter!==!0||u.noTick===!0||u.tickable!==!0)===!0&&(r.tickable=!1)),r.matchesFilter===!0&&(r.noTick!==!0&&L!==!0&&r.children.every(u=>u.noTick)===!0&&(r.noTick=!0),V))){if(r.ticked=!1,r.indeterminate=r.children.some(u=>u.indeterminate===!0),r.tickable=r.tickable===!0&&r.children.some(u=>u.tickable),r.indeterminate!==!0){const u=r.children.reduce((W,ve)=>ve.ticked===!0?W+1:W,0);u===r.children.length?r.ticked=!0:u>0&&(r.indeterminate=!0)}r.indeterminate===!0&&(r.indeterminateNextState=r.children.every(u=>u.tickable!==!0||u.ticked!==!0))}return r};return l.nodes.forEach(e=>i(e,null)),t});H(()=>l.ticked,t=>{T.value=t}),H(()=>l.expanded,t=>{v.value=t});function x(t){const i=[].reduce,e=(a,n)=>{if(a||!n)return a;if(Array.isArray(n)===!0)return i.call(Object(n),e,a);if(n[l.nodeKey]===t)return n;if(n[l.childrenKey])return e(null,n[l.childrenKey])};return e(null,l.nodes)}function le(){return T.value.map(t=>x(t))}function ie(){return v.value.map(t=>x(t))}function ne(t){return t&&s.value[t]?s.value[t].expanded:!1}function ae(){l.expanded!==void 0?k("update:expanded",[]):v.value=[]}function M(){const t=v.value,i=e=>{e[l.childrenKey]&&e[l.childrenKey].length>0&&e.expandable!==!1&&e.disabled!==!0&&(t.push(e[l.nodeKey]),e[l.childrenKey].forEach(i))};l.nodes.forEach(i),l.expanded!==void 0?k("update:expanded",t):v.value=t}function j(t,i,e=x(t),a=s.value[t]){if(a.lazy&&a.lazy!=="loaded"){if(a.lazy==="loading")return;b.value[t]="loading",Array.isArray(e[l.childrenKey])!==!0&&(e[l.childrenKey]=[]),k("lazyLoad",{node:e,key:t,done:n=>{b.value[t]="loaded",e[l.childrenKey]=Array.isArray(n)===!0?n:[],qe(()=>{const o=s.value[t];o&&o.isParent===!0&&I(t,!0)})},fail:()=>{delete b.value[t],e[l.childrenKey].length===0&&delete e[l.childrenKey]}})}else a.isParent===!0&&a.expandable===!0&&I(t,i)}function I(t,i){let e=v.value;const a=l.expanded!==void 0;if(a===!0&&(e=e.slice()),i){if(l.accordion&&s.value[t]){const n=[];s.value[t].parent?s.value[t].parent.children.forEach(o=>{o.key!==t&&o.expandable===!0&&n.push(o.key)}):l.nodes.forEach(o=>{const c=o[l.nodeKey];c!==t&&n.push(c)}),n.length>0&&(e=e.filter(o=>n.includes(o)===!1))}e=e.concat([t]).filter((n,o,c)=>c.indexOf(n)===o)}else e=e.filter(n=>n!==t);a===!0?k("update:expanded",e):v.value=e}function re(t){return t&&s.value[t]?s.value[t].ticked:!1}function B(t,i){let e=T.value;const a=l.ticked!==void 0;a===!0&&(e=e.slice()),i?e=e.concat(t).filter((n,o,c)=>c.indexOf(n)===o):e=e.filter(n=>t.includes(n)===!1),a===!0&&k("update:ticked",e)}function de(t,i,e){const a={tree:g,node:t,key:e,color:l.color,dark:_.value};return ee(a,"expanded",()=>i.expanded,n=>{n!==i.expanded&&j(e,n)}),ee(a,"ticked",()=>i.ticked,n=>{n!==i.ticked&&B([e],n)}),a}function D(t){return(l.filter?t.filter(i=>s.value[i[l.nodeKey]].matchesFilter):t).map(i=>ue(i))}function oe(t){if(t.icon!==void 0)return f(X,{class:"q-tree__icon q-mr-sm",name:t.icon,color:t.iconColor});const i=t.img||t.avatar;if(i)return f("img",{class:`q-tree__${t.img?"img":"avatar"} q-mr-sm`,src:i})}function ce(){k("afterShow")}function se(){k("afterHide")}function ue(t){const i=t[l.nodeKey],e=s.value[i],a=t.header&&h[`header-${t.header}`]||h["default-header"],n=e.isParent===!0?D(t[l.childrenKey]):[],o=n.length>0||e.lazy&&e.lazy!=="loaded";let c=t.body&&h[`body-${t.body}`]||h["default-body"];const E=a!==void 0||c!==void 0?de(t,e,i):null;return c!==void 0&&(c=f("div",{class:"q-tree__node-body relative-position"},[f("div",{class:w.value},[c(E)])])),f("div",{key:i,class:`q-tree__node relative-position q-tree__node--${o===!0?"parent":"child"}`},[f("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(e.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(e.selected===!0?" q-tree__node--selected":"")+(e.disabled===!0?" q-tree__node--disabled":""),tabindex:e.link===!0?0:-1,onClick:y=>{Y(t,e,y)},onKeypress(y){Ce(y)!==!0&&(y.keyCode===13?Y(t,e,y,!0):y.keyCode===32&&P(t,e,y,!0))}},[f("div",{class:"q-focus-helper",tabindex:-1,ref:y=>{C[e.key]=y}}),e.lazy==="loading"?f(Ke,{class:"q-tree__spinner",color:U.value}):o===!0?f(X,{class:"q-tree__arrow"+(e.expanded===!0?" q-tree__arrow--rotate":""),name:R.value,onClick(y){P(t,e,y)}}):null,e.hasTicking===!0&&e.noTick!==!0?f(be,{class:"q-tree__tickbox",modelValue:e.indeterminate===!0?null:e.ticked,color:U.value,dark:_.value,dense:!0,keepColor:!0,disable:e.tickable!==!0,onKeydown:Z,"onUpdate:modelValue":y=>{fe(e,y)}}):null,f("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(e.selected===!0?d.value:w.value)},[a?a(E):[oe(t),f("div",t[l.labelKey])]])]),o===!0?l.noTransition===!0?f("div",{class:"q-tree__node-collapsible"+w.value,key:`${i}__q`},[c,f("div",{class:"q-tree__children"+(e.disabled===!0?" q-tree__node--disabled":"")},e.expanded?n:null)]):f(Be,{duration:l.duration,onShow:ce,onHide:se},()=>we(f("div",{class:"q-tree__node-collapsible"+w.value,key:`${i}__q`},[c,f("div",{class:"q-tree__children"+(e.disabled===!0?" q-tree__node--disabled":"")},n)]),[[Ee,e.expanded]])):c])}function G(t){const i=C[t];i&&i.focus()}function Y(t,i,e,a){a!==!0&&G(i.key),N.value&&i.selectable?l.noSelectionUnset===!1?k("update:selected",i.key!==l.selected?i.key:null):i.key!==l.selected&&k("update:selected",i.key===void 0?null:i.key):P(t,i,e,a),typeof t.handler=="function"&&t.handler(t)}function P(t,i,e,a){e!==void 0&&Z(e),a!==!0&&G(i.key),j(i.key,!i.expanded,t,i)}function fe(t,i){if(t.indeterminate===!0&&(i=t.indeterminateNextState),t.strictTicking)B([t.key],i);else if(t.leafTicking){const e=[],a=n=>{n.isParent?(i!==!0&&n.noTick!==!0&&n.tickable===!0&&e.push(n.key),n.leafTicking===!0&&n.children.forEach(a)):n.noTick!==!0&&n.tickable===!0&&(n.leafFilteredTicking!==!0||n.matchesFilter===!0)&&e.push(n.key)};a(t),B(e,i)}}return l.defaultExpandAll===!0&&M(),Object.assign(g,{getNodeByKey:x,getTickedNodes:le,getExpandedNodes:ie,isExpanded:ne,collapseAll:ae,expandAll:M,setExpanded:j,isTicked:re,setTicked:B}),()=>{const t=D(l.nodes);return f("div",{class:K.value},t.length===0?l.filter?l.noResultsLabel||m.lang.tree.noResults:l.noNodesLabel||m.lang.tree.noNodes:t)}}});const je=$e({name:"AgregarRol",setup(){const l=F(""),h=F([]),k=ke(),g=[{label:"Seleccionar todos los permisos",children:[{label:"Usuario",children:[{label:"Ver usuarios",id:2},{label:"Crear Usuario",id:3},{label:"Editar Usuario",id:4},{label:"Inactivar Usuario",id:5},{label:"Activar Usuario",id:6},{label:"Eliminar Usuario",id:7}]},{label:"Roles",children:[{label:"Ver Roles",id:8},{label:"Crear Rol",id:9},{label:"Editar Rol",id:9},{label:"Eliminar Rol",id:10}]}]}],m=async()=>{if(h.value.length==0)return k.notify({type:"warning",message:"Debes elegir algun permiso",position:"top-right"})};return H(l,(_,b)=>{console.log("object"),l.value=_.toUpperCase()}),{nombreRol:l,expanded:F(["Seleccionar todos los permisos"]),rolesSelected:h,simple:g,submit:m}}}),Pe=Q("div",{class:"text-h6"},"Agregar Rol",-1),Ve={class:"row q-gutter-sm justify-around"},Oe={class:"col-xs-12 col-sm-5"},He=Q("label",null,"Nombre del Rol:",-1),Me={class:"col-xs-12"},Ie={class:"col-xs-9 col-sm-12 flex justify-center"};function De(l,h,k,g,m,_){return Qe(),Fe(ye,{style:{width:"700px","max-width":"80vw"}},{default:z(()=>[$(J,null,{default:z(()=>[Pe]),_:1}),$(J,{class:"q-pt-none"},{default:z(()=>[$(ge,{onSubmit:l.submit},{default:z(()=>[Q("div",Ve,[Q("div",Oe,[He,$(me,{modelValue:l.nombreRol,"onUpdate:modelValue":h[0]||(h[0]=b=>l.nombreRol=b),modelModifiers:{trim:!0},"input-class":"text-center",dense:"",filled:"",required:""},null,8,["modelValue"])]),Q("div",Me,[$(ze,{class:"col-12 col-sm-6",nodes:l.simple,"node-key":"label","tick-strategy":"leaf",expanded:l.expanded,"onUpdate:expanded":h[1]||(h[1]=b=>l.expanded=b),ticked:l.rolesSelected,"onUpdate:ticked":h[2]||(h[2]=b=>l.rolesSelected=b)},null,8,["nodes","expanded","ticked"])]),Q("div",Ie,[$(Ne,{label:"Guardar",class:"q-px-xl",type:"submit",color:"green-9"})])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var Xe=Ae(je,[["render",De]]);export{Xe as default};
