import{r as F,n as i,A as d,am as T,a1 as K,D as $,al as M,l as Q,aB as q,t as B,G as E,Q as N,x as H,y as L,i as G,af as Y,v as J,Y as U,m as W,k as X,aC as Z}from"./index.ba1a224f.js";import{a as A,u as O}from"./use-dark.efe23668.js";import{f as ee,j as te,e as ae}from"./Api.dfad945c.js";function oe(t,f){const e=F(null),m=i(()=>t.disable===!0?null:d("span",{ref:e,class:"no-outline",tabindex:-1}));function l(s){const u=f.value;s!==void 0&&s.type.indexOf("key")===0?u!==null&&document.activeElement!==u&&u.contains(document.activeElement)===!0&&u.focus():e.value!==null&&(s===void 0||u!==null&&u.contains(s.target)===!0)&&e.value.focus()}return{refocusTargetEl:m,refocusTarget:l}}var ne={xs:30,sm:35,md:40,lg:50,xl:60};const re={...O,...M,...ee,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},ue=["update:modelValue"];function le(t,f){const{props:e,slots:m,emit:l,proxy:s}=Q(),{$q:u}=s,C=A(e,u),p=F(null),{refocusTargetEl:y,refocusTarget:V}=oe(e,p),x=T(e,ne),g=i(()=>e.val!==void 0&&Array.isArray(e.modelValue)),a=i(()=>{const o=q(e.val);return g.value===!0?e.modelValue.findIndex(h=>q(h)===o):-1}),r=i(()=>g.value===!0?a.value>-1:q(e.modelValue)===q(e.trueValue)),b=i(()=>g.value===!0?a.value===-1:q(e.modelValue)===q(e.falseValue)),S=i(()=>r.value===!1&&b.value===!1),_=i(()=>e.disable===!0?-1:e.tabindex||0),P=i(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(C.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),n=i(()=>{const o=r.value===!0?"truthy":b.value===!0?"falsy":"indet",h=e.color!==void 0&&(e.keepColor===!0||(t==="toggle"?r.value===!0:b.value!==!0))?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${o}${h}`}),c=i(()=>{const o={type:"checkbox"};return e.name!==void 0&&Object.assign(o,{"^checked":r.value===!0?"checked":void 0,name:e.name,value:g.value===!0?e.val:e.trueValue}),o}),v=te(c),I=i(()=>{const o={tabindex:_.value,role:t==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":S.value===!0?"mixed":r.value===!0?"true":"false"};return e.disable===!0&&(o["aria-disabled"]="true"),o});function k(o){o!==void 0&&(B(o),V(o)),e.disable!==!0&&l("update:modelValue",j(),o)}function j(){if(g.value===!0){if(r.value===!0){const o=e.modelValue.slice();return o.splice(a.value,1),o}return e.modelValue.concat([e.val])}if(r.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(b.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function R(o){(o.keyCode===13||o.keyCode===32)&&B(o)}function z(o){(o.keyCode===13||o.keyCode===32)&&k(o)}const D=f(r,S);return Object.assign(s,{toggle:k}),()=>{const o=D();e.disable!==!0&&v(o,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const h=[d("div",{class:n.value,style:x.value,"aria-hidden":"true"},o)];y.value!==null&&h.push(y.value);const w=e.label!==void 0?K(m.default,[e.label]):$(m.default);return w!==void 0&&h.push(d("div",{class:`q-${t}__label q-anchor--skip`},w)),d("div",{ref:p,class:P.value,...I.value,onClick:k,onKeydown:R,onKeyup:z},h)}}const se=d("div",{key:"svg",class:"q-checkbox__bg absolute"},[d("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[d("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),d("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var fe=E({name:"QCheckbox",props:re,emits:ue,setup(t){function f(e,m){const l=i(()=>(e.value===!0?t.checkedIcon:m.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>l.value!==null?[d("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[d(N,{class:"q-checkbox__icon",name:l.value})])]:[se]}return le("checkbox",f)}}),ve=E({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:f}){const e=i(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>d(t.tag,{class:e.value},$(f.default))}}),me=E({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:f,emit:e}){const m=Q(),l=F(null);let s=0;const u=[];function C(a){const r=typeof a=="boolean"?a:t.noErrorFocus!==!0,b=++s,S=(n,c)=>{e("validation"+(n===!0?"Success":"Error"),c)},_=n=>{const c=n.validate();return typeof c.then=="function"?c.then(v=>({valid:v,comp:n}),v=>({valid:!1,comp:n,err:v})):Promise.resolve({valid:c,comp:n})};return(t.greedy===!0?Promise.all(u.map(_)).then(n=>n.filter(c=>c.valid!==!0)):u.reduce((n,c)=>n.then(()=>_(c).then(v=>{if(v.valid===!1)return Promise.reject(v)})),Promise.resolve()).catch(n=>[n])).then(n=>{if(n===void 0||n.length===0)return b===s&&S(!0),!0;if(b===s){const{comp:c,err:v}=n[0];if(v!==void 0&&console.error(v),S(!1,c),r===!0){const I=n.find(({comp:k})=>typeof k.focus=="function"&&Y(k.$)===!1);I!==void 0&&I.comp.focus()}}return!1})}function p(){s++,u.forEach(a=>{typeof a.resetValidation=="function"&&a.resetValidation()})}function y(a){a!==void 0&&B(a);const r=s+1;C().then(b=>{r===s&&b===!0&&(t.onSubmit!==void 0?e("submit",a):a!==void 0&&a.target!==void 0&&typeof a.target.submit=="function"&&a.target.submit())})}function V(a){a!==void 0&&B(a),e("reset"),J(()=>{p(),t.autofocus===!0&&t.noResetFocus!==!0&&x()})}function x(){ae(()=>{if(l.value===null)return;const a=l.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),r=>r.tabIndex>-1);a!=null&&a.focus({preventScroll:!0})})}U(W,{bindComponent(a){u.push(a)},unbindComponent(a){const r=u.indexOf(a);r>-1&&u.splice(r,1)}});let g=!1;return H(()=>{g=!0}),L(()=>{g===!0&&t.autofocus===!0&&x()}),G(()=>{t.autofocus===!0&&x()}),Object.assign(m.proxy,{validate:C,resetValidation:p,submit:y,reset:V,focus:x,getValidationComponents:()=>u}),()=>d("form",{class:"q-form",ref:l,onSubmit:y,onReset:V},$(f.default))}}),be=E({name:"QCard",props:{...O,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:f}){const{proxy:{$q:e}}=Q(),m=A(t,e),l=i(()=>"q-card"+(m.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>d(t.tag,{class:l.value},$(f.default))}});function ge(){return X(Z)}export{fe as Q,be as a,ve as b,me as c,ge as u};
